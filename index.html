<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>SteelCraft — فخامة الحديد</title>
  <meta name="description" content="SteelCraft — أبواب وبوابات وشبك حماية بدرجة تنفيذ ملكية.">
  <meta name="theme-color" content="#0B0E13">
  <link rel="preload" href="styles.css" as="style">
  <link rel="stylesheet" href="styles.css">
  <style>
    :root{
      --ink:#0B0E13; --panel:#0F141C; --line:#1A2230;
      --gold:#D8BA74; --gold-2:#F0DCA4; --gold-3:#A98847;
      --max:1180px;
    }
    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{margin:0;background:var(--ink);color:#E9ECF1;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Noto Sans Arabic","Noto Kufi Arabic",Arial,sans-serif}

    /* Nav */
    .nav{position:sticky;top:0;z-index:50;backdrop-filter:saturate(1.2) blur(10px);
      background:linear-gradient(180deg,rgba(15,20,28,.85),rgba(15,20,28,.65));border-bottom:1px solid var(--line)}
    .nav .inner{max-width:var(--max);margin:auto;display:flex;align-items:center;gap:16px;padding:14px 16px}
    .brand{font-weight:900;letter-spacing:.4px}
    .links{margin-inline-start:auto;display:flex;gap:10px}
    .links a{padding:8px 12px;border-radius:12px}
    .links a:hover{background:#131A24}

    /* HERO — cinematic */
    .hero{
      position:relative; isolation:isolate; overflow:hidden;
      background:
        radial-gradient(1100px 420px at 60% -10%, rgba(216,186,116,.18), transparent 60%),
        radial-gradient(800px 300px at 10% 10%, rgba(168,136,71,.14), transparent 60%),
        linear-gradient(180deg,#0B0E13 0%,#0B0E13 30%,#0D1118 100%);
      border-bottom:1px solid var(--line);
    }
    .hero::before, .hero::after{
      content:""; position:absolute; inset:-20% -20% auto auto; height:120vh; width:120vh;
      background:conic-gradient(from 0deg, transparent 0 30%, rgba(216,186,116,.12) 35% 45%, transparent 50% 100%);
      filter:blur(40px); opacity:.45; transform:rotate(8deg);
      animation:spin 28s linear infinite;
    }
    .hero::after{
      inset:auto auto -40% -10%; height:100vh; width:100vh; filter:blur(50px); opacity:.25; animation:spin 36s linear infinite reverse;
    }
    @keyframes spin{to{transform:rotate(368deg)}}

    .hero-wrap{max-width:var(--max);margin:auto;padding:100px 16px 64px;display:grid;gap:26px;grid-template-columns:1.05fr .95fr}
    @media (max-width:980px){.hero-wrap{grid-template-columns:1fr;padding-top:84px}}

    .slab{
      perspective:1000px;
      display:grid;place-items:center; min-height:420px; position:relative;
    }
    .plate{
      position:relative; padding:34px 24px; border-radius:22px;
      background:linear-gradient(180deg, rgba(28,36,48,.6), rgba(18,24,34,.6));
      border:1px solid #202735; box-shadow:0 30px 80px rgba(0,0,0,.45) inset, 0 10px 40px rgba(0,0,0,.35);
      transform:rotateX(10deg) rotateY(-10deg);
    }
    .crest{
      font-family:serif; font-weight:900; letter-spacing:4px; line-height:1;
      font-size:clamp(38px,7vw,78px); text-align:center; margin:0;
      background:linear-gradient(92deg,var(--gold-3),var(--gold),var(--gold-2),var(--gold));
      -webkit-background-clip:text; -webkit-text-fill-color:transparent;
      position:relative;
    }
    /* sheen */
    .crest::after{
      content:""; position:absolute; inset:0; 
      background:linear-gradient(100deg,transparent 0%,rgba(255,255,255,.18) 45%,transparent 60%);
      mix-blend-mode:overlay; transform:translateX(-120%) skewX(-18deg); 
      animation:sheen 6s ease-in-out infinite 1s;
      pointer-events:none;
    }
    @keyframes sheen{50%{transform:translateX(120%) skewX(-18deg)}}

    .subtitle{color:#BFC6D0; text-align:center; margin:10px auto 0; max-width:560px}
    .foil{
      position:absolute; inset:auto 10% -18% auto; width:320px; height:180px; border-radius:24px; opacity:.55;
      background:radial-gradient(160px 80px at 70% 20%,rgba(240,220,164,.35),transparent 60%),
                 linear-gradient(180deg,rgba(240,220,164,.08),rgba(168,136,71,.08));
      border:1px solid rgba(240,220,164,.18); filter:blur(10px);
      transform:rotate(-8deg);
    }
    @media (max-width:980px){ .foil{display:none} }

    /* actions */
    .cta{display:flex;gap:12px;flex-wrap:wrap;justify-content:center;margin-top:16px}
    .btn{padding:13px 18px;border-radius:14px;border:1px solid var(--gold);cursor:pointer;font-weight:800}
    .btn-primary{background:var(--gold);color:#111;border-color:var(--gold)}
    .btn-ghost{background:transparent;color:var(--gold)}
    .btn:focus-visible{outline:2px solid var(--gold)}

    /* selling points */
    .bar{background:#0E141C;border:1px solid var(--line);border-radius:16px;padding:12px 14px;margin-top:18px}
    .bar ul{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:10px;padding:0;margin:0;list-style:none}
    .bar li{display:flex;gap:10px;align-items:center;color:#C9CFD8}
    .dot{width:8px;height:8px;border-radius:50%;background:var(--gold)}

    /* Featured */
    .section{max-width:var(--max);margin:44px auto 0;padding:0 16px}
    .section h2{margin:0 0 12px}
    .grid{display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(230px,1fr))}
    .card{position:relative;background:var(--panel);border:1px solid var(--line);border-radius:18px;overflow:hidden}
    .media{aspect-ratio:4/3;object-fit:cover;background:#0A0F16;transition:transform .5s cubic-bezier(.2,.7,.2,1)}
    .card:hover .media{transform:scale(1.04)}
    .body{padding:12px}
    .price{color:var(--gold-2);font-weight:900}
    .reflect::after{
      content:"";position:absolute;inset:0;pointer-events:none;mix-blend-mode:screen;opacity:.22;
      background:linear-gradient(12deg,transparent 0%,rgba(255,255,255,.15) 50%,transparent 80%);
      transform:translateY(20%)
    }

    /* floating sparks */
    .spark{position:absolute; width:2px;height:2px; background:var(--gold-2); border-radius:2px; opacity:.7}
    .s1{top:12%; left:16%; animation:rise 9s linear infinite}
    .s2{top:22%; left:82%; animation:rise 11s linear infinite 1s}
    .s3{top:46%; left:8%; animation:rise 13s linear infinite .3s}
    @keyframes rise{0%{transform:translateY(0)} 100%{transform:translateY(-120vh)}}

    /* magnetic buttons */
    .magnet{position:relative; overflow:hidden}
    .magnet span{position:relative;z-index:2}
    .magnet::before{
      content:"";position:absolute;inset:-60% -40%;background:radial-gradient(180px 120px at var(--x,50%) var(--y,50%),rgba(255,255,255,.12),transparent 60%);
      transition:transform .15s; z-index:1;
    }

    footer{border-top:1px solid var(--line);text-align:center;color:#A8AFB8;padding:20px 16px;margin-top:40px}
    @media (prefers-reduced-motion:reduce){
      .hero::before,.hero::after,.crest::after,.media,.s1,.s2,.s3{animation:none !important;transform:none !important}
    }
  </style>
</head>
<body>
  <!-- NAV -->
  <nav class="nav" aria-label="التنقل">
    <div class="inner">
      <strong class="brand">SteelCraft</strong>
      <div class="links">
        <a href="index.html" aria-current="page">الرئيسية</a>
        <a href="catalog.html">الكاتالوج</a>
        <a href="order.html" class="cart-pill">الطلبات <span class="cart-count">0</span></a>
      </div>
    </div>
  </nav>

  <!-- HERO -->
  <header class="hero">
    <!-- sparky ambience -->
    <i class="spark s1"></i><i class="spark s2"></i><i class="spark s3"></i>

    <div class="hero-wrap">
      <div class="slab">
        <div class="plate reflect">
          <h1 class="crest" aria-label="STEELCRAFT">STEELCRAFT</h1>
          <p class="subtitle">فخامة حديد بتشطيب ملكي — أبواب، بوابات، شبك حماية، شبابيك ودرابزينات بمعايير تنفيذ عالية الدقة.</p>
          <div class="cta" role="group" aria-label="إجراءات">
            <a href="catalog.html"><button class="btn btn-primary magnet"><span>تصفّح الكتالوج</span></button></a>
            <a href="order.html"><button class="btn btn-ghost magnet"><span>السلة / الإتمام</span></button></a>
          </div>
        </div>
        <div class="foil" aria-hidden="true"></div>
      </div>

      <div>
        <div class="bar">
          <ul>
            <li><span class="dot"></span> مقاسات على الطبيعة</li>
            <li><span class="dot"></span> زجاج مقسّى / أقفال أمان</li>
            <li><span class="dot"></span> دهان فرن مقاوم للصدأ</li>
          </ul>
        </div>
      </div>
    </div>
  </header>

  <!-- FEATURED -->
  <section class="section" aria-labelledby="f">
    <h2 id="f">مختارات هذا الأسبوع</h2>
    <div id="featured" class="grid" aria-live="polite" aria-busy="true">
      <!-- Skeleton بسيط -->
      <article class="card" aria-hidden="true"><div class="media" style="background:linear-gradient(90deg,#0D131B,#0F151E,#0D131B);animation:shine 1.2s linear infinite"></div><style>@keyframes shine{to{background-position:-200% 0}} </style><div class="body"><div style="height:12px;background:#1a2130;border-radius:8px;width:70%"></div><div style="height:10px;background:#1a2130;border-radius:8px;width:40%;margin-top:8px"></div></div></article>
      <article class="card" aria-hidden="true"><div class="media" style="background:linear-gradient(90deg,#0D131B,#0F151E,#0D131B);animation:shine 1.2s linear infinite .1s"></div><div class="body"><div style="height:12px;background:#1a2130;border-radius:8px;width:70%"></div><div style="height:10px;background:#1a2130;border-radius:8px;width:40%;margin-top:8px"></div></div></article>
      <article class="card" aria-hidden="true"><div class="media" style="background:linear-gradient(90deg,#0D131B,#0F151E,#0D131B);animation:shine 1.2s linear infinite .2s"></div><div class="body"><div style="height:12px;background:#1a2130;border-radius:8px;width:70%"></div><div style="height:10px;background:#1a2130;border-radius:8px;width:40%;margin-top:8px"></div></div></article>
      <article class="card" aria-hidden="true"><div class="media" style="background:linear-gradient(90deg,#0D131B,#0F151E,#0D131B);animation:shine 1.2s linear infinite .3s"></div><div class="body"><div style="height:12px;background:#1a2130;border-radius:8px;width:70%"></div><div style="height:10px;background:#1a2130;border-radius:8px;width:40%;margin-top:8px"></div></div></article>
    </div>
  </section>

  <footer>© <span id="y"></span> SteelCraft — جميع الحقوق محفوظة</footer>

  <script type="module">
    import {updateCartCount, fetchProducts} from './app.js';
    // سنة
    document.getElementById('y').textContent = new Date().getFullYear();

    // أزرار مغناطيسية
    for (const b of document.querySelectorAll('.magnet')){
      b.addEventListener('pointermove', e=>{
        const r=b.getBoundingClientRect(), x=(e.clientX-r.left)/r.width*100, y=(e.clientY-r.top)/r.height*100;
        b.style.setProperty('--x', x+'%'); b.style.setProperty('--y', y+'%');
      });
    }

    // تحميل المنتجات المختارة
    async function boot(){
      try{
        updateCartCount();
        const list = (await fetchProducts()).slice(0,4);
        const grid = document.getElementById('featured');
        grid.setAttribute('aria-busy','false');
        grid.innerHTML = list.map(p=>`
          <article class="card reflect">
            <a href="product.html?id=${p.id}">
              <img class="media" loading="lazy" src="${p.image}" alt="${p.name}">
            </a>
            <div class="body">
              <div><a href="product.html?id=${p.id}"><strong>${p.name}</strong></a></div>
              <div class="price" style="margin-top:8px">${Number(p.price).toFixed(2)} ₪</div>
            </div>
          </article>
        `).join('');
      }catch(err){
        console.error(err);
        document.getElementById('featured').innerHTML =
          `<div class="card" style="padding:16px">تعذّر تحميل المنتجات الآن.</div>`;
      }
    }
    boot();
  </script>
</body>
</html>
